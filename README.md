# LoaEnhanceLab

- 제작 목표
> 로스트아크의 장비 강화 재료들의 시세를 수집, DB에 저장하고, 이를 이용하여 요일/시간별 시세 변동 패턴 분석과 간단한 예측 모델을 통해 강화 비용이 최소가 되는 시간대를 추천하는 시스템 개발


# 프로젝트 개요
강화 시스템은 플레이어가 골드를 소모하여 장비를 강화하는 구조이며, 강화에 필요한 재료의 시세는 매 시간 변동되고, 거래소 시세는 수요 공급의 시장성을 띄므로 특정 시간대에 강화하면 비용이 크게 절약될 수 있습니다.

**이 프로젝트에서는 크게 세가지 목표를 가집니다.**

1. 강화 재료의 시세 정보를 DB 저장
2. 시세의 시간/요일별 변화 패턴 분석 및 비용 계산
3. 예측 모델을 사용하여 강화 비용 최소 시간대 추천

- **참고 자료&사이트**
> [로아차트](https://loachart.com/chart) - API 및 시세 정보   
[아이스펭](https://loa.icepeng.com/) - 강화 필요 재료 소모량 data


# 프로젝트 진행 순서 리스트(목표)

### 1. 목표를 위한 대상 시스템의 구조 분석

* 즉, 로스트아크의 강화 시스템의 수학적 모델링을 위한 분석

### 2. 수집이 필요한 data 정의

* '강화'에 필요한 재료 table 제작

### 3. DB 스키마 설계 및 정의

* 해당 프로젝트에 활용될 data를 저장하기 위한 DB의 구조를 설계

### 4. 실제 DB 구축

* 설계된 DB를 바탕으로 SQLite를 활용하여 실제 DB를 구축하기 위한 코드 작성

### 5. 기초 데이터 저장

* 1,2번 단계에서 분석 및 정의된 강화 관련 기본 데이터 사전 저장
* 강화 재료, 소모량, 사전 정보 등의 기입

### 6. 실제 시세 데이터 수집

* 로아차트에서 가져온 각 재료별 과거 시세 데이터를 시간순으로 정리하여 기입

### 7. 시세 데이터 기반으로 예측 데이터 생성

* 각 재료별로 과거 데이터를 활용한 예측 모델을 통해 예측 data 생성 (및 DB 저장)

### 8. 최종 목표 코드 작성

* 희망하는 강화 종류 및 단계 설정(입력)
* 해당 강화 종류 및 단계에 따른 시간별 1회 시도 당 소모비용 계산
* 계산된 데이터중 최소비용과 해당 시간 출력

### 9. 완성 이후 확장 관련(해당 프로젝트에서는 진행X 가능성 높음)

* 현재 아이스펭 사이트에서 서비스 중인 현 시세에 대한 총 강화 비용 계산 적용
* 로아차트에 작성된 과거 데이터 뿐 아니라 실제 로아 오픈API를 통한 실시간 시세 확보
* 가시성 및 사용성 개선(웹 등)


# 강화 시스템의 요약 설명

로스트아크 강화 구조는 아래와 같음

## 1. 일반 재련 (10 → 25강)

* 단계별로 필요한 재료가 다름
* 무기: 파괴석 / 돌파석 / 융화 / 파편 / 숨결(용암)
* 방어구: 수호석 / 돌파석 / 융화 / 파편 / 숨결(빙하)
* 성공 확률은 단계별로 상이함
* 실패 시 성공 확률이 기본 확률의 10%씩 증가 (최대 10회 누적)
* 장인의 기운 100% 도달 시 다음 시도 확정 성공
* 책(t)은 추가 확률 제공, 책(f)은 사용 불가

## 2. 상급 재련 (담금질 1~4)

* 각 구간을 “담금질 단계”로 모델링
* 한 담금질 구간은 0~10칸 상승
* 성공/대성공/대대성공(확률은 강화 UI 기준)
* 무기/방어구는 각각 다른 재료 사용
* 책은 구간별로 t(사용 가능)/f(사용 불가)/e(이벤트전용)

## 3. 비용 모델 기준

* **골드**만 비용으로 계산 (별도 재화인 실링은 고려X)
* 기대값 구조 : “재료 × 시세 + 강화 수수료 골드”의 “강화 1회 비용 × 기대 시도 횟수 → 누적 비용” 방식


# 수집 대상 재료 data

강화에 사용하는 재료 리스트

### ▶ 기본 5종

* 운명의 파괴석
* 운명의 수호석
* 운명의 돌파석
* 아비도스 융화 재료
* 운명의 파편(주머니 3종)

### ▶ 숨결 2종

* 용암의 숨결(무기)
* 빙하의 숨결(방어구)

### ▶ 강화 책 (일반/상급)

* 일반 재련 책: 총 6종
* 상급 재련 책: 총 8종

※ 상급 재련 3·4단계 책은 이벤트 전용이므로
**시장 구매 불가 → index 시작 위치 미래로 처리**하여 모델링.


# DB 설계

![Alt text](/DB_ERD.png)


# DB 구축

* init.py를 통해 enhance.db 생성

# 기초 데이터 입력_1단계

* 시세 데이터를 저장하기 위해 필요한 기반 정보를 DB에 미리 입력(insert_seed_data.py)

# 시세 데이터 수집

* 로아차트의 API로부터 시세 data 가져오기(fetch_history_data.py)

# 기초 데이터 입력_2단계(진행중)

* 입력된 데이터를 기반으로 Pouch류의 unit 가격 후 해당 pouch 기반으로 기초 데이터 입력
